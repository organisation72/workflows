name: Typescript CI

on: 
  workflow_call:
  workflow_dispatch:
  
env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}
  
jobs:
  lint:
    uses: organisation72/workflows/.github/workflows/typescript-lint.yml@main
    
  build:
    needs: lint
    uses: organisation72/workflows/.github/workflows/typescript-build.yml@main
    
  test:
    needs: build
    uses: organisation72/workflows/.github/workflows/typescript-test.yml@main

#   build-and-push-image:
#     runs-on: ubuntu-latest
    
#     steps:
#       - uses: actions/checkout@v3
#       - uses: docker/login-action@v2
#         with:
#           registry: ${{ env.REGISTRY }}
#           username: ${{ github.actor }}
#           password: ${{ secrets.GITHUB_TOKEN }}
#       - uses: docker/metadata-action@v4
#         id: meta
#         with:
#           images: ${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}
#       - uses: docker/build-push-action@v4
#         with:
#           context: .
#           push: true
#           tags: ${{ steps.meta.outputs.tags }}
#           labels: ${{ steps.meta.outputs.labels }}
